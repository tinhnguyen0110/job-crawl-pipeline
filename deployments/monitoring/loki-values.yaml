# monitoring/loki-values.yaml - PhiÃªn báº£n phÃ²ng thá»§ vÃ  tÆ°á»ng minh

deploymentMode: SingleBinary

loki:
  # Cáº¥u hÃ¬nh lÆ°u trá»¯. Báº¯t buá»™c pháº£i cÃ³ Ä‘á»ƒ cÃ¡c template helper hoáº¡t Ä‘á»™ng.
  storage:
    type: 'filesystem'
  
  # ==========================================================
  # PHáº¦N Sá»¬A Lá»–I: ThÃªm vÃ o schema_config cÆ¡ báº£n
  # ==========================================================
  # ÄÃ¢y lÃ  cáº¥u hÃ¬nh báº¯t buá»™c khi dÃ¹ng persistence
  schemaConfig:
    configs:
      - from: 2024-01-01 # Báº¯t Ä‘áº§u tá»« má»™t ngÃ y trong quÃ¡ khá»©
        store: boltdb-shipper
        object_store: filesystem
        schema: v12 # hoáº·c v11, tÃ¹y phiÃªn báº£n Loki
        index:
          prefix: index_
          period: 24h # Táº¡o index má»›i má»—i 24 giá»
  limits_config:
    allow_structured_metadata: false  # ğŸ‘ˆ THÃŠM DÃ’NG NÃ€Y

singleBinary:
  replicas: 1
  persistence:
    enabled: true
    size: 10Gi
    storageClassName: standard

# ==========================================================

backend:
  replicas: 0
read:
  replicas: 0
write:
  replicas: 0
ruler:
  enabled: false
ingester:
  enabled: false

promtail:
  enabled: true

gateway:
  enabled: false
